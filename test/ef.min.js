!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ef=t()}(this,function(){"use strict";function e(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function t(e,t,r){var a=t[r];if(void 0!==a&&null!==a){if(X.call(e,r)&&(void 0===e[r]||null===e[r]))throw new TypeError("Cannot convert undefined or null to object ("+r+")");X.call(e,r)&&V(a)?e[r]=n(Object(e[r]),t[r]):e[r]=a}}function n(e,n){if(e===n)return e;n=Object(n);for(var r in n)X.call(n,r)&&t(e,n,r);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(n),o=0;o<a.length;o++)Z.call(n,a[o])&&t(e,n,a[o]);return e}var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e&&e.exports?e.exports=n():t.log=n()}(r,function(){function e(e){return typeof console!==c&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):i)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==c&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=this,r=0;r<u.length;r++){var a=u[r];n[a]=r<e?i:n.methodFactory(a,e,t)}}function a(t,r,a){return e(t)||n.apply(this,arguments)}function o(e,t,n){function o(e){var t=(u[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(e){}}function i(){var e;try{e=window.localStorage[f]}catch(e){}if(typeof e===c)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(f)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}var s,l=this,f="loglevel";e&&(f+=":"+e),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||a,l.getLevel=function(){return s},l.setLevel=function(t,n){if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(s=t,n!==!1&&o(t),r.call(l,t,e),typeof console===c&&t<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(e){i()||l.setLevel(e,!1)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)};var p=i();null==p&&(p=null==t?"WARN":t),l.setLevel(p,!1)}var i=function(){},c="undefined",u=["trace","debug","info","warn","error"],s=new o,l={};s.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new o(e,s.getLevel(),s.methodFactory)),t};var f=typeof window!==c?window.log:void 0;return s.noConflict=function(){return typeof window!==c&&window.log===s&&(window.log=f),s},s})}),o="[EF]",i=a.getLogger("ef"),c=(i.trace.bind(null,o),i.debug.bind(null,o),i.info.bind(null,o)),u=i.warn.bind(null,o),s=i.error.bind(null,o),l=function(e){return s("Detach the component before attaching it to a new component! Component to be detached:",e)},f=function(){return s("Cannot mount a component to it's child component!")};i.setLevel("error"),c("Debug logging enabled!");var p=new RegExp("\\&[0-7]{1,3}","g"),d=new RegExp("\\&u\\[.*?\\]","g"),h=new RegExp("\\&u.{0,4}","g"),v=new RegExp("\\&x.{0,2}","g"),b=new RegExp("\\&","g"),g=new RegExp("\\&b","g"),m=new RegExp("\\&t","g"),y=new RegExp("\\&n","g"),w=new RegExp("\\&v","g"),N=new RegExp("\\&f","g"),$=new RegExp("\\&r","g"),x=function(){throw new SyntaxError("Octal escape sequences are not allowed in EFML.")},E=function(e){if(e=e.substr(3,e.length-4),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");try{return String.fromCodePoint(e)}catch(e){throw new SyntaxError("Undefined Unicode code-point")}},D=function(e){if(e=e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");return String.fromCharCode(e)},T=function(e){if(e="00"+e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid hexadecimal escape sequence");return String.fromCharCode(e)},k=function(e){for(var t=e.split("&&"),n=[],r=0,a=t;r<a.length;r+=1){var o=a[r],i=o.replace(p,x).replace(d,E).replace(h,D).replace(v,T).replace(g,"\b").replace(m,"\t").replace(y,"\n").replace(w,"\v").replace(N,"\f").replace($,"\r").replace(b,"");n.push(i)}return n.join("&")},j=k,O=">#%@.-+".split(""),R="attached data element nodes methods subscribe unsubscribe update destroy".split(" ").map(function(e){return"$"+e}),S=/^\{\{.*\}\}$/,C=function(e,t){return void 0===t&&(t=-2),"Failed to parse eft template: "+e+". at line "+(t+1)},L=function(e){return!e.replace(/\s/,"")},I=function(e,t){null===t.offset&&(t.offset=e.match(/\s*/)[0],t.offset&&(t.offsetReg=new RegExp("^"+t.offset)))},A=function(e,t,n){if(t.offsetReg){var r=!1;if(e=e.replace(t.offsetReg,function(){return r=!0,""}),!r)throw new SyntaxError(C("Expected indent to be grater than 0 and less than "+(t.prevDepth+1)+", but got -1",n))}return e},P=function(e,t){if(!t.indentReg){var n=e.match(/^(\t*)( *).*/)[2];n&&(t.indentReg=new RegExp(n))}},_=function(e,t,n){var r=0;t.indentReg&&(e=e.replace(/^\s*/,function(e){return e.replace(t.indentReg,"\t")}));var a=e.replace(/^\t*/,function(e){return r=e.length,""});if(/^\s/.test(a))throw new SyntaxError(C("Bad indent",n));return{depth:r,content:a}},F=function(e,t){for(var n=e,r=0;r<t;r++)n=n[n.length-1];return n},U=function(e){e=e.substr(2,e.length-4);var t=e.split("="),n=t[0],r=t.slice(1),a=n.trim().split("."),o=j(r.join("=").trim());return o?[a,o]:[a]},q=function(e){var t=e.split("#"),n=t[0],r=t.slice(1),a=n.split("."),o=a[0],i=a.slice(1),c=i.join(".");return S.test(c)?{tag:o,name:r.join("#"),class:U(c)}:{tag:o,name:r.join("#"),class:i.join(" ")}},B=function(e){var t=e.split("="),n=t.shift().trim(),r=t.join("=").trim();return S.test(r)?{name:n,value:U(r)}:{name:n,value:j(r)}},K=function(e){var t=[],n=e.match(/\{\{.+?\}\}/g);if(n)for(var r=e.split(/\{\{.+?\}\}/g),a=0;a<r.length;a++)r[a]&&t.push(j(r[a])),n[a]&&t.push(U(n[a]));else t.push(j(e));return t},M=function(e){var t=!1,n=!1,r=!1;return{listener:e.replace(/\.stop(?=\.|$)/g,function(){return t=!0,""}).replace(/\.stopImmediate(\.|$)/g,function(){return n=!0,""}).replace(/\.prevent(\.|$)/g,function(){return r=!0,""}),stop:t,stopImmediate:n,prevent:r}},W=function(e){var t=e.split(":"),n=t[0],r=t.slice(1),a=r.join(":");return a?S.test(a)?[n.trim(),U(a)]:[n.trim(),j(r.join(":"))]:[n.trim()]},z=function(e){var t=e.line,n=e.ast,r=e.parsingInfo,a=e.i;if(!L(t)){P(t,r),I(t,r);var o=_(A(t,r,a),r,a),i=o.depth,c=o.content;if(c){if(i<0||i-r.prevDepth>1||i-r.prevDepth==1&&["comment","tag"].indexOf(r.prevType)===-1||"comment"!==r.prevType&&0===i&&r.topExists)throw new SyntaxError(C("Expected indent to be grater than 0 and less than "+(r.prevDepth+1)+", but got "+i,a));var u=c[0];if(c=c.slice(1),!r.topExists&&O.indexOf(u)>=0&&">"!==u)throw new SyntaxError(C("No top level entry",a));if(!c&&O.indexOf(u)>=0)throw new SyntaxError(C("Empty content",a));switch((i<r.prevDepth||i===r.prevDepth&&"tag"===r.prevType)&&(r.currentNode=F(n,i)),r.prevDepth=i,u){case">":r.topExists||(r.topExists=!0,r.minDepth=i);var s=q(c),l=[{t:s.tag}];s.class&&(l[0].a={},l[0].a.class=s.class),s.name&&(l[0].n=s.name),r.currentNode.push(l),r.currentNode=l,r.prevType="tag";break;case"#":var f=B(c),p=f.name,d=f.value;r.currentNode[0].a||(r.currentNode[0].a={}),r.currentNode[0].a[p]=d,r.prevType="attr";break;case"%":var h=B(c),v=h.name,b=h.value;r.currentNode[0].p||(r.currentNode[0].p={}),r.currentNode[0].p[v]=b,r.prevType="prop";break;case"@":var g=B(c),m=g.name,y=g.value;if("string"!=typeof y)throw new SyntaxError(C("Methods should not be wrapped in mustaches",a));r.currentNode[0].e||(r.currentNode[0].e={});var w=M(m),N=w.listener,$=w.stop,x=w.stopImmediate,E=w.prevent,D=W(y),T=D[0],k=D[1],j={m:T};$&&(j.s=1),x&&(j.i=1),E&&(j.p=1),k&&(j.v=k),r.currentNode[0].e[N]=j,r.prevType="event";break;case".":(S=r.currentNode).push.apply(S,K(c)),r.prevType="text";break;case"-":if(R.indexOf(c)!==-1)throw new SyntaxError(C("Reserved name '"+c+"' should not be used",a));r.currentNode.push({n:c,t:0}),r.prevType="node";break;case"+":r.currentNode.push({n:c,t:1}),r.prevType="list";break;default:r.prevType="comment"}}var S}},G=function(e){if(!e)throw new TypeError(C("Template required, but nothing present"));var t=typeof e;if("string"!==t)throw new TypeError(C("Expected a string, but got a(n) "+t));for(var n=e.split(/\r?\n/),r=[],a={indentReg:null,prevDepth:0,offset:null,offsetReg:null,prevType:"comment",currentNode:r,topExists:!1},o=0;o<n.length;o++)z({line:n[o],ast:r,parsingInfo:a,i:o});if(r[0])return r[0];throw new SyntaxError(C("Nothing to be parsed",n.length-1))},Y=function(e,t){return t||(t=G),t(e)},H=Array.prototype,J={copy:function(e){return H.slice.call(e,0)},empty:function(e){return e.length=0,e},equals:function(e,t){if(!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},pop:function(e){return H.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.push.apply(e,t)},remove:function(e,t){var n=H.indexOf.call(e,t);if(n>-1)return H.splice.call(e,n,1),t},reverse:function(e){return H.reverse.call(e)},shift:function(e){return H.shift.call(e)},slice:function(e,t,n){return H.slice.call(e,t,n)},sort:function(e,t){return H.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.unshift.apply(e,t)}},Q=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)},V=Q,X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=function(t){var r=arguments;t=e(t);for(var a=1;a<arguments.length;a++)n(t,r[a]);return t},te=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n];t[a]||(t[a]={}),t=t[a]}return t},ne=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n];if(!t[a]){var o={};Object.defineProperty(t,a,{get:function(){return o},set:function(e){ee(o,e)},enumerable:!0})}t=t[a]}return t},re=function(e){var t=e._path,n=e._key,r=e.parentNode,a=e.subscriberNode,o=e.dataNode;return t.length>0&&(r=ne(t,r),a=te(t,a),o=te(t,o)),a[n]||(a[n]=[]),Object.prototype.hasOwnProperty.call(o,n)||(o[n]=""),{parentNode:r,subscriberNode:a[n],dataNode:o}},ae=function(e,t){var n=e.split("."),r=n.pop();return te(n,t)[r]},oe=function(e){var t=e.parentNode,n=e.dataNode,r=e.subscriberNode,a=e.state,o=e._key;Object.defineProperty(t,o,{get:function(){return n[o]},set:function(e){if(n[o]!==e){n[o]=e;for(var t=0,i=r;t<i.length;t+=1){i[t].call(a,e)}}},enumerable:!0})},ie=function(e){var t=e.bind,n=e.state,r=e.subscriber,a=e.innerData,o=e.handler,i=J.copy(t[0]),c=t[1],u=i.pop(),s=re({_path:i,_key:u,parentNode:n.$data,subscriberNode:r,dataNode:a}),l=s.parentNode,f=s.subscriberNode,p=s.dataNode;return Object.prototype.hasOwnProperty.call(l,u)||oe({parentNode:l,dataNode:p,subscriberNode:f,state:n,_key:u}),c&&(l[u]=c),o&&(o(p[u]),f.push(o)),{dataNode:p,subscriberNode:f,_key:u}},ce=function(e,t,n){var r=document.createElement(e);return t&&Object.defineProperty(n,t,{value:r,enumerable:!0}),r},ue=function(e){var t=e.dataNode,n=e.subscriberNode,r=e.handler,a=e.state,o=e._key,i=e.value;if(t[o]!==i){t[o]=i;for(var c=0,u=n;c<u.length;c+=1){var s=u[c];s!==r&&s.call(a,i)}}},se=function(e){var t=e.dataNode,n=e.subscriberNode,r=e.handler,a=e.state,o=e.element,i=e.key,c=e._key,u=function(){return ue({dataNode:t,subscriberNode:n,handler:r,state:a,_key:c,value:o.value})};"value"===i?(o.addEventListener("input",u,!0),o.addEventListener("keyup",u,!0),o.addEventListener("change",u,!0)):o.addEventListener("change",function(){return ue({dataNode:t,subscriberNode:n,handler:r,state:a,_key:c,value:o.checked})},!0)},le=function(e){var t=e.element,n=e.attr,r=e.key,a=e.state,o=e.subscriber,i=e.innerData;"string"==typeof n?t.setAttribute(r,n):ie({bind:n,state:a,subscriber:o,innerData:i,handler:function(e){return t.setAttribute(r,e)}})},fe=function(e){var t=e.element,n=e.prop,r=e.key,a=e.state,o=e.subscriber,i=e.innerData;if("string"==typeof n)t[r]=n;else{var c=function(e){t[r]=e},u=ie({bind:n,state:a,subscriber:o,innerData:i,handler:c}),s=u.dataNode,l=u.subscriberNode,f=u._key;"value"!==r&&"checked"!==r||se({dataNode:s,subscriberNode:l,handler:c,state:a,element:t,key:r,_key:f})}},pe=function(e){var t=e.v,n=e.state,r=e.subscriber,a=e.innerData;return Array.isArray(t)?ie({bind:t,state:n,subscriber:r,innerData:a}):{dataNode:{_:t},_key:"_"}},de=function(e){var t=e.element,n=e.event,r=e.state,a=e.subscriber,o=e.innerData,i=n.l,c=n.m,s=n.s,l=n.i,f=n.p,p=n.h,d=n.a,h=n.c,v=n.t,b=n.u,g=n.k,m=n.v,y=pe({v:m,state:r,subscriber:a,innerData:o}),w=y.dataNode,N=y._key;t.addEventListener(i,function(e){!!p!=!!e.shiftKey||!!d!=!!e.altKey||!!h!=!!e.ctrlKey||!!v!=!!e.metaKey||g&&g.indexOf(e.which)===-1||(s&&e.stopPropagation(),l&&e.stopImmediatePropagation(),f&&e.preventDefault(),r.$methods[c]?r.$methods[c]({e:e,value:w[N],state:r}):u("Method named '"+c+"' not found!"))},!!b)},he=function(e){var t=e.info,n=e.state,r=e.innerData,a=e.nodes,o=e.subscriber,i=t.t,c=t.a,u=t.p,s=t.e,l=t.n,f=ce(i,l,a);for(var p in c)le({element:f,attr:c[p],key:p,state:n,subscriber:o,innerData:r});for(var d in u)fe({element:f,prop:u[d],key:d,state:n,subscriber:o,innerData:r});for(var h in s)de({element:f,event:s[h],state:n,subscriber:o,innerData:r});return f},ve=Node.prototype,be={before:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=document.createDocumentFragment();t.reverse();for(var a=0,o=t;a<o.length;a+=1){var i=o[a];ve.appendChild.call(r,i)}ve.insertBefore.call(e.parentNode,r,e)},after:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];ve.appendChild.call(r,i)}e.nextSibling?ve.insertBefore.call(e.parentNode,r,e.nextSibling):ve.appendChild.call(e.parentNode,r)},append:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if([1,9,11].indexOf(e.nodeType)!==-1){for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];ve.appendChild.call(r,i)}ve.appendChild.call(e,r)}},remove:function(e){ve.removeChild.call(e.parentNode,e)}},ge={empty:function(){for(var e=this,t=0,n=e;t<n.length;t+=1){var r=n[t];be.remove(r.$element),r.$destroy()}J.empty(this)},pop:function(){if(0!==this.length){var e=J.pop(this);return be.remove(e.$element),e}},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=[],a=0,o=t;a<o.length;a+=1){var i=o[a];J.push(r,i.$element)}return 0===this.length?be.after.apply(be,[e].concat(r)):be.after.apply(be,[this[this.length-1].$element].concat(r)),J.push.apply(J,[this].concat(t))},remove:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=[],a=0,o=t;a<o.length;a+=1){var i=o[a],c=J.remove(e,i);c&&(be.remove(c.$element),J.push(r,c))}return r},reverse:function(){var e=this;if(0===this.length)return this;var t=document.createTextNode("");be.before(this[0].$element,t);for(var n=[],r=this.length-1;r>=0;r--)J.push(n,e[r].$element);return be.after.apply(be,[t].concat(n)),be.remove(t),J.reverse(this)},shift:function(){if(0!==this.length){var e=J.shift(this);return be.remove(e.$element),e}},sort:function(e){var t=this;if(0===this.length)return this;var n=document.createTextNode("");be.before(this[0].$element,n);for(var r=J.sort(this,e),a=[],o=0,i=t;o<i.length;o+=1){var c=i[o];J.push(a,c.$element)}return be.after.apply(be,[n].concat(a)),be.remove(n),r},splice:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===this.length)return this;var r=document.createTextNode("");be.before(this[0].$element,r);for(var a=J.splice.apply(J,[this].concat(t)),o=[],i=0,c=a;i<c.length;i+=1){var u=c[i];be.remove(u.$element)}for(var s=0,l=e;s<l.length;s+=1){var f=l[s];J.push(o,f.$element)}return be.after.apply(be,[r].concat(o)),be.remove(r),a},unshift:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(0===this.length)return(c=this).push.apply(c,e).length;var n=document.createTextNode("");be.before(this[0].$element,n);for(var r=[],a=0,o=e;a<o.length;a+=1){var i=o[a];if(i.$attached)return l(i);J.push(r,i.$element)}return be.after.apply(be,[n].concat(r)),be.remove(n),J.unshift.apply(J,[this].concat(e));var c}},me=function(e,t){return Object.defineProperties(e,{empty:{value:ge.empty},pop:{value:ge.pop},push:{value:ge.push.bind(e,t)},remove:{value:ge.remove},reverse:{value:ge.reverse},shift:{value:ge.shift},sort:{value:ge.sort},splice:{value:ge.splice},unshift:{value:ge.unshift}}),e},ye=function(e){return Array.isArray(e)?"array":typeof e},we="attached data element nodes methods subscribe unsubscribe update destroy".split(" ").map(function(e){return"$"+e}),Ne=function(e){var t=e.node,n=e.state,r=e.subscriber,a=e.innerData,o=e.element,i=document.createTextNode("");ie({bind:t,state:n,subscriber:r,innerData:a,handler:function(e){i.textContent=e}}),be.append(o,i)},$e=function(e){var t=e.$element,n=e.children,r=e.name,a=e.anchor,o=e.value;if(n[r]!==o){if(o&&(o.$attached&&l(o),o.$element.contains(t)))return f();n[r]&&be.remove(n[r].$element),o&&be.after(a,o.$element),n[r]=o}},xe=function(e){var t=e.state,n=e.name,r=e.children,a=e.anchor;Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){$e({$element:t.$element,children:r,name:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},Ee=function(e){var t=e.$element,n=e.children,r=e.name,a=e.anchor,o=e.value;o=o?J.copy(o):[];var i=document.createDocumentFragment();if(n[r]){for(var c=0,u=o;c<u.length;c+=1){var s=u[c];if(s.$element.contains(t))return f();be.append(i,s.$element),J.remove(n[r],s)}for(var l=0,p=n[r];l<p.length;l+=1){var d=p[l];be.remove(d.$element)}}else for(var h=0,v=o;h<v.length;h+=1){var b=v[h];be.append(i,b.$element)}n[r].length=0,J.push.apply(J,[n[r]].concat(o)),be.after(a,i)},De=function(e){var t=e.state,n=e.name,r=e.children,a=e.anchor;r[n]=me([],a),Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){r[n]&&J.equals(r[n],e)||Ee({$element:t.$element,children:r,name:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},Te=function(e){var t=e.node,n=e.nodeType,r=e.element,a=e.state,o=e.innerData,i=e.nodes,c=e.children,s=e.subscriber,l=e.create;switch(n){case"string":be.append(r,document.createTextNode(t));break;case"array":"object"===ye(t[0])?be.append(r,l({ast:t,state:a,innerData:o,nodes:i,children:c,subscriber:s,create:l})):Ne({node:t,state:a,subscriber:s,innerData:o,element:r});break;case"object":if(we.indexOf(t.n)!==-1){u("Reserved name '"+t.n+"' should not be used, ignoring.");break}var f=document.createTextNode("");if(0===t.t)xe({state:a,name:t.n,children:c,anchor:f});else{if(1!==t.t)throw new TypeError("Not a standard ef.js AST: Unknown mounting point type '"+t.t+"'");De({state:a,name:t.n,children:c,anchor:f})}be.append(r,f);break;default:throw new TypeError("Not a standard ef.js AST: Unknown node type '"+n+"'")}},ke=function(e){for(var t=e.ast,n=e.state,r=e.innerData,a=e.nodes,o=e.children,i=e.subscriber,c=e.create,u=he({info:t[0],state:n,innerData:r,nodes:a,subscriber:i}),s=1;s<t.length;s++)Te({node:t[s],nodeType:ye(t[s]),element:u,state:n,innerData:r,nodes:a,children:o,subscriber:i,create:c});return u},je=function(e,t){for(var n in t)e[n]=t[n];return e},Oe=Object.assign||je,Re=function(e,t,n){var r=ae(e,n);r.indexOf(t)!==-1&&J.remove(r,t)},Se=function(){return!!this.$element.parentNode},Ce=function(e){var t=Oe({},e);t.$data&&(Oe(this.$data,t.$data),delete t.$data),t.$methods&&(Oe(this.$methods,t.$methods),delete t.$methods),Oe(this,t)},Le=function(){var e=this;for(var t in e)e[t]=null,delete e[t];delete this.$element,delete this.$data,delete this.$methods,delete this.$nodes,delete this.$subscribe,delete this.$unsubscribe,delete this.$attached,delete this.$update,delete this.$destroy},Ie=function(e){var t={},n={},r={},a={},o={},i={},c={};Object.defineProperties(t,{$data:{get:function(){return a},set:function(e){ee(a,e)},configurable:!0},$methods:{get:function(){return i},set:function(e){ee(i,e)},configurable:!0},$nodes:{get:function(){return r},configurable:!0},$subscribe:{value:function(e,n){ie({bind:[e.split(".")],state:t,subscriber:c,innerData:o,handler:n})},configurable:!0},$unsubscribe:{value:function(e,t){Re(e,t,c)},configurable:!0},$attached:{get:Se,configurable:!0},$update:{value:Ce,configurable:!0},$destroy:{value:Le,configurable:!0}});var u=ke({ast:e,state:t,innerData:o,nodes:r,children:n,subscriber:c,create:ke});return Object.defineProperty(t,"$element",{value:u,configurable:!0}),t},Ae=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r="",a=0;a<t.length;a++)r+=e[a]+t[a];return r+e[e.length-1]},Pe=G,_e=function(){function e(e){var t=ye(e);if("string"===t)e=Y(e,Pe);else if("array"!==t)throw new TypeError("Cannot create new component without proper template or AST!");var n=e;Object.defineProperty(this,"render",{value:function(e){var t=Ie(n);return e&&t.$update(e),t}})}return e.setPatser=function(e){Pe=e},e.parseEft=function(e){return G(e)},e.t=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new e(Ae.apply(void 0,t))},e}();return c("ef.js v0.1.4-alpha.1.master.b0c90ae initialized!"),_e});
